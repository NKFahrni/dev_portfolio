<div class="p-4 max-w-4xl mx-auto">
  <h2 class="text-2xl font-semibold mb-4">Formula 1 Drivers</h2>

  <div *ngIf="loading()" class="text-gray-500">Loading drivers…</div>
  <div *ngIf="error()" class="text-red-600">{{ error() }}</div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="bg-white shadow rounded overflow-hidden">
      <ul>
        <li *ngFor="let driver of drivers()" class="border-b last:border-b-0">
          <button class="w-full text-left p-3 flex items-center gap-3 hover:bg-gray-50"
            (click)="selectDriver(driver)">
            <div class="flex-1">
              <div class="font-medium">{{ driver.givenName }} {{ driver.familyName }}</div>
              <div class="text-sm text-gray-500">{{ driver.nationality }}</div>
            </div>
            <div class="text-sm text-blue-600">Details</div>
          </button>
        </li>
      </ul>
    </div>

    <div class="bg-white shadow rounded p-4">
      <ng-container *ngIf="selectedDriver() as sd; else empty">
        <div class="flex justify-between items-start">
          <div>
            <h3 class="text-xl font-semibold">{{ sd.givenName }} {{ sd.familyName }}</h3>
            <div class="text-sm text-gray-600">Born: {{ sd.dateOfBirth || 'Unknown' }}</div>
            <div class="text-sm text-gray-600">Nationality: {{ sd.nationality }}</div>
            <div class="mt-3 text-sm text-gray-700">Permanent number: {{ sd.permanentNumber || '—' }}</div>
          </div>
          <div>
            <button class="text-sm text-gray-500" (click)="clearSelection()">Close</button>
          </div>
        </div>

        <div class="mt-4">
          <pre class="text-xs text-gray-600 overflow-auto max-h-48">{{ sd | json }}</pre>
        </div>
      </ng-container>

      <ng-template #empty>
        <div class="text-gray-500">Select a driver to see details.</div>
      </ng-template>
    </div>
  </div>
</div>
